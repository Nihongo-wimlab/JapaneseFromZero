
<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japanse Memory Oefening - Netlify Ready</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f0f2f5;
            color: #1f2937;
        }

        .card {
            transition: all 0.2s ease-out;
            cursor: pointer;
            user-select: none;
            min-height: 100px;
        }

        .selected {
            background-color: #fff7ed !important;
            border: 3px solid #f97316 !important;
            transform: scale(1.05);
            z-index: 10;
        }

        .matched {
            background-color: #f97316 !important;
            color: white !important;
            cursor: default;
            border: 3px solid #ea580c !important;
            transform: scale(1) !important;
        }

        .error {
            background-color: #fee2e2 !important;
            border: 3px solid #ef4444 !important;
            animation: shake 0.4s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-4xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">æ—¥æœ¬èªž Memory</h1>
            <p class="text-gray-600">Vind de sets van 3: Hiragana, Romaji en Nederlands</p>
        </header>

        <!-- Status Overzicht -->
        <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mb-6 bg-white p-6 rounded-2xl shadow-sm border border-gray-200">
            <div class="flex flex-col gap-1">
                <div id="status-text" class="font-bold text-orange-600 text-sm uppercase tracking-wider">Sets gevonden: 0 / 6</div>
                <div id="score-text" class="font-black text-gray-700 text-2xl">Score: 0</div>
            </div>
            <div class="flex gap-3">
                <button onclick="pickNewSet()" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-xl transition font-bold shadow-md hover:shadow-lg active:scale-95">Nieuwe set</button>
                <button onclick="resetCurrentGame()" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-2 rounded-xl transition font-bold active:scale-95">Reset</button>
            </div>
        </div>

        <!-- Speelveld -->
        <div id="game-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 mb-8">
            <!-- Kaarten worden hier door JS geplaatst -->
        </div>

        <!-- Toevoeg sectie -->
        <section class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100">
            <h2 class="text-xl font-bold mb-4 text-gray-800 text-center">Nieuwe woorden toevoegen</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <div class="flex flex-col gap-1">
                    <label class="text-xs font-bold text-gray-500 ml-1">Hiragana</label>
                    <input type="text" id="input-kana" placeholder="ã­ã“" class="w-full border-2 p-3 rounded-xl focus:border-orange-500 outline-none transition bg-gray-50">
                </div>
                <div class="flex flex-col gap-1">
                    <label class="text-xs font-bold text-gray-500 ml-1">Romaji</label>
                    <input type="text" id="input-romaji" placeholder="Neko" class="w-full border-2 p-3 rounded-xl focus:border-orange-500 outline-none transition bg-gray-50">
                </div>
                <div class="flex flex-col gap-1">
                    <label class="text-xs font-bold text-gray-500 ml-1">Nederlands</label>
                    <input type="text" id="input-nl" placeholder="Kat" class="w-full border-2 p-3 rounded-xl focus:border-orange-500 outline-none transition bg-gray-50">
                </div>
            </div>
            <button onclick="addNewPhrase()" class="w-full bg-gray-800 hover:bg-black text-white font-bold py-4 rounded-xl transition-all shadow-md active:scale-95">
                Opslaan & Start Oefening
            </button>
        </section>

        <!-- Win-scherm (Modal) -->
        <div id="success-modal" class="fixed inset-0 bg-black/70 hidden flex items-center justify-center p-4 z-50 backdrop-blur-md">
            <div class="bg-white rounded-3xl p-8 max-w-sm w-full text-center shadow-2xl scale-in">
                <div class="text-6xl mb-4">ðŸŽ‰</div>
                <h2 id="congrats-kana" class="text-3xl font-black mb-2 text-gray-800"></h2>
                <p id="congrats-romaji" class="text-gray-500 italic mb-2 text-xl"></p>
                <p id="congrats-nl" class="text-xl text-orange-600 font-bold mb-6"></p>
                <button onclick="closeModal()" class="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-4 rounded-2xl transition shadow-lg active:scale-95">Speel nog eens</button>
            </div>
        </div>
    </div>

    <script>
        const allPhrasesDatabase = [
            { id: 1, kana: "ã“ã‚“ã«ã¡ã¯", romaji: "Konnichiwa", nl: "Hallo" },
            { id: 2, kana: "ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™", romaji: "Arigatou gozaimasu", nl: "Dank u wel" },
            { id: 3, kana: "ã™ã¿ã¾ã›ã‚“", romaji: "Sumimasen", nl: "Pardon" },
            { id: 4, kana: "ãŠã¯ã‚ˆã†", romaji: "Ohayou", nl: "Goedemorgen" },
            { id: 5, kana: "ã•ã‚ˆã†ãªã‚‰", romaji: "Sayounara", nl: "Tot ziens" },
            { id: 6, kana: "ãŠã‚„ã™ã¿ãªã•ã„", romaji: "Oyasumi nasai", nl: "Welterusten" },
            { id: 7, kana: "ã¯ã˜ã‚ã¾ã—ã¦", romaji: "Hajimemashite", nl: "Aangenaam" },
            { id: 8, kana: "ãŠã„ã—ã„ã§ã™", romaji: "Oishii desu", nl: "Het is lekker" },
            { id: 9, kana: "ã­ã“", romaji: "Neko", nl: "Kat" },
            { id: 10, kana: "ã„ã¬", romaji: "Inu", nl: "Hond" },
            { id: 11, kana: "ã¿ãš", romaji: "Mizu", nl: "Water" },
            { id: 12, kana: "ãŠã¡ã‚ƒ", romaji: "Ocha", nl: "Thee" }
        ];

        const congratulations = [
            { kana: "ã™ã”ã„ï¼", romaji: "Sugoi!", nl: "Geweldig!" },
            { kana: "ãŠã‚ã§ã¨ã†ï¼", romaji: "Omedetou!", nl: "Gefeliciteerd!" },
            { kana: "ã‚„ã£ãŸï¼", romaji: "Yatta!", nl: "Je hebt het gedaan!" }
        ];

        let activePhrases = [];
        let selectedCards = [];
        let matchedIds = [];
        let totalScore = 0;
        const GAME_SIZE = 6;

        function pickNewSet(newlyAdded = null) {
            let pool = [...allPhrasesDatabase];
            let selection = [];

            if (newlyAdded) {
                selection.push(newlyAdded);
                pool = pool.filter(p => p.id !== newlyAdded.id);
            }

            pool.sort(() => Math.random() - 0.5);
            selection = selection.concat(pool.slice(0, GAME_SIZE - selection.length));

            activePhrases = selection;
            initGame();
        }

        function initGame() {
            const grid = document.getElementById('game-grid');
            grid.innerHTML = '';
            selectedCards = [];
            matchedIds = [];
            
            let cardsData = [];
            activePhrases.forEach(p => {
                cardsData.push({ id: p.id, text: p.kana });
                cardsData.push({ id: p.id, text: p.romaji });
                cardsData.push({ id: p.id, text: p.nl });
            });

            cardsData.sort(() => Math.random() - 0.5);

            cardsData.forEach(data => {
                const div = document.createElement('div');
                div.className = 'card bg-white p-3 flex items-center justify-center text-center rounded-2xl border-2 border-gray-100 shadow-sm text-sm sm:text-base font-bold text-gray-700 hover:border-orange-200';
                div.textContent = data.text;
                div.dataset.id = data.id;
                div.onclick = () => selectCard(div);
                grid.appendChild(div);
            });
            
            updateStatus();
        }

        function selectCard(el) {
            if (el.classList.contains('matched') || el.classList.contains('selected')) return;
            if (selectedCards.length >= 3) return;

            el.classList.add('selected');
            selectedCards.push(el);

            if (selectedCards.length === 3) {
                checkMatch();
            }
        }

        function checkMatch() {
            const ids = selectedCards.map(c => c.dataset.id);
            const isMatch = ids.every(id => id === ids[0]);

            if (isMatch) {
                totalScore += 10;
                const currentCards = [...selectedCards];
                setTimeout(() => {
                    currentCards.forEach(card => {
                        card.classList.replace('selected', 'matched');
                    });
                    matchedIds.push(ids[0]);
                    updateStatus();
                    checkWin();
                }, 300);
                selectedCards = [];
            } else {
                const currentCards = [...selectedCards];
                setTimeout(() => {
                    currentCards.forEach(card => {
                        card.classList.add('error');
                    });
                    
                    setTimeout(() => {
                        currentCards.forEach(card => {
                            card.classList.remove('selected', 'error');
                        });
                    }, 600);
                }, 400);
                selectedCards = [];
            }
        }

        function updateStatus() {
            document.getElementById('status-text').textContent = `Sets gevonden: ${matchedIds.length} / ${activePhrases.length}`;
            document.getElementById('score-text').textContent = `Score: ${totalScore}`;
        }

        function checkWin() {
            if (matchedIds.length === activePhrases.length) {
                const msg = congratulations[Math.floor(Math.random() * congratulations.length)];
                document.getElementById('congrats-kana').textContent = msg.kana;
                document.getElementById('congrats-romaji').textContent = msg.romaji;
                document.getElementById('congrats-nl').textContent = msg.nl;
                document.getElementById('success-modal').classList.remove('hidden');
            }
        }

        function addNewPhrase() {
            const k = document.getElementById('input-kana');
            const r = document.getElementById('input-romaji');
            const n = document.getElementById('input-nl');

            if (!k.value.trim() || !r.value.trim() || !n.value.trim()) return;

            const newObj = {
                id: Date.now(),
                kana: k.value.trim(),
                romaji: r.value.trim(),
                nl: n.value.trim()
            };

            allPhrasesDatabase.push(newObj);
            k.value = ''; r.value = ''; n.value = '';
            pickNewSet(newObj);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function resetCurrentGame() {
            initGame();
        }

        function closeModal() {
            document.getElementById('success-modal').classList.add('hidden');
            pickNewSet();
        }

        // Start game op laden
        window.addEventListener('DOMContentLoaded', () => pickNewSet());
    </script>
</body>
</html>